<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Codera Application</title>
    
    <!-- External CSS -->
    <link rel="stylesheet" href="css/styles.css">
    
    <!-- External Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Firebase (compat) CDNs -->
    <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-firestore-compat.js"></script>
    
    <!-- CodeMirror -->
    <link rel="stylesheet" href="https://unpkg.com/codemirror@5.65.16/lib/codemirror.css">
    <script src="https://unpkg.com/codemirror@5.65.16/lib/codemirror.js"></script>
    <script src="https://unpkg.com/codemirror@5.65.16/mode/javascript/javascript.js"></script>
    <script src="https://unpkg.com/codemirror@5.65.16/mode/python/python.js"></script>
    <script src="https://unpkg.com/codemirror@5.65.16/mode/clike/clike.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/codemirror@5.65.16/theme/dracula.css">

    <!-- React Hooks and Firebase Shims -->
    <script>
        // Make React hooks available as globals
        const { useState, useEffect, useRef, useMemo, useCallback } = React;

        // Provide modular-style helper names backed by compat SDK
        window.initializeApp = window.initializeApp || function(config) { return firebase.initializeApp(config); };
        window.getFirestore = window.getFirestore || function(app) { return firebase.firestore(app); };
        window.getAuth = window.getAuth || function(app) { return firebase.auth(app); };
        window.signInWithCustomToken = window.signInWithCustomToken || function(auth, token) { return auth.signInWithCustomToken(token); };
        window.signInAnonymously = window.signInAnonymously || function(auth) { return auth.signInAnonymously(); };
        window.onAuthStateChanged = window.onAuthStateChanged || function(auth, handler) { return auth.onAuthStateChanged(handler); };
        window.signOut = window.signOut || function(auth) { return auth.signOut(); };
        window.signInWithEmailAndPassword = window.signInWithEmailAndPassword || function(auth, email, password) { return auth.signInWithEmailAndPassword(email, password); };
        window.GoogleAuthProvider = window.GoogleAuthProvider || function() { return new firebase.auth.GoogleAuthProvider(); };
        window.signInWithPopup = window.signInWithPopup || function(auth, provider) { return auth.signInWithPopup(provider); };
        window.createUserWithEmailAndPassword = window.createUserWithEmailAndPassword || function(auth, email, password) { return auth.createUserWithEmailAndPassword(email, password); };
    </script>
</head>
<body class="bg-gray-900">
    <!-- Theme initialization script -->
    <script>
        try {
            if (localStorage.getItem('theme') === 'light') {
                document.body.classList.add('light');
            }
        } catch (e) {}
    </script>
    
    <!-- React app root -->
    <div id="root"></div>

    <!-- Utility Scripts -->
    <script src="js/utils/firebase.js"></script>
    <script src="js/utils/judge0.js"></script>
    <script src="js/utils/router.js"></script>
    
    <!-- Component Scripts -->
    <script src="js/components/navbar.js"></script>
    <script src="js/components/sidebar.js"></script>
    <script src="js/components/practice.js"></script>
    <script src="js/components/battle.js"></script>
    <script src="js/components/notes.js"></script>
    
    <!-- Page Scripts -->
    <script src="js/pages/home.js"></script>
    <script src="js/pages/login.js"></script>
    <script src="js/pages/profile.js"></script>
    <script src="js/pages/leaderboard.js"></script>
    <script src="js/pages/friends.js"></script>
    
    <!-- Main App Script -->
    <script src="js/app.js"></script>
</body>
</html>